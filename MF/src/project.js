System.register([],(function(){"use strict";return{execute:function(){System.register("project:///assets/script/Cube.ts",["cc"],(function(e,t){var s,o,i,r,n,a,l,c,p,u,b,_;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){s=e._decorator,o=e.Component,i=e.Material,r=e.ModelComponent,n=e.find}],execute:function(){cc._RF.push(window.module||{},"b66fa721SdM+pOj69I1QMe9","Cube"),b=s.ccclass,_=s.property,e("Cube",(a=b("Cube"),l=_({type:[i]}),a((p=function(e){function t(){var e,s;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return s=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(i))),babelHelpers.initializerDefineProperty(s,"material",u,babelHelpers.assertThisInitialized(s)),s}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"start",value:function(){}},{key:"init",value:function(e){for(var t=0;t<e.length;t++){n("NewQuad"+(t+1),this.node).getComponent(r).material=this.material[e[t]]}}}]),t}(o),u=babelHelpers.applyDecoratedDescriptor(p.prototype,"material",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=p))||c)),cc._RF.pop()}}})),System.register("project:///assets/script/CubeParams.ts",["cc"],(function(e,t){var s,o,i,r,n,a,l,c,p,u;return e({_dec:void 0,_class:void 0}),{setters:[function(e){s=e._decorator,o=e.v3}],execute:function(){cc._RF.push(window.module||{},"886e1QhaOtGOojT73+jkzhF","CubeParams"),n=s.ccclass,s.property,a=[{_pos:o(0,0,0),_color:[0],_rotation:o(0,0,0)}],l=[{_pos:o(0,0,1),_color:[1],_rotation:o(0,0,0)},{_pos:o(0,1,0),_color:[2],_rotation:o(-90,0,0)},{_pos:o(1,0,0),_color:[3],_rotation:o(0,90,0)},{_pos:o(-1,0,0),_color:[4],_rotation:o(0,-90,0)},{_pos:o(0,0,-1),_color:[5],_rotation:o(0,180,0)},{_pos:o(0,-1,0),_color:[6],_rotation:o(90,0,0)}],c=[{_pos:o(0,1,1),_color:[1,2],_rotation:o(0,0,0)},{_pos:o(1,1,0),_color:[3,2],_rotation:o(0,90,0)},{_pos:o(0,1,-1),_color:[5,2],_rotation:o(0,180,0)},{_pos:o(-1,1,0),_color:[4,2],_rotation:o(0,-90,0)},{_pos:o(1,0,1),_color:[1,3],_rotation:o(0,0,-90)},{_pos:o(1,0,-1),_color:[3,5],_rotation:o(0,90,-90)},{_pos:o(-1,0,-1),_color:[5,4],_rotation:o(0,180,-90)},{_pos:o(-1,0,1),_color:[4,1],_rotation:o(0,-90,-90)},{_pos:o(0,-1,1),_color:[1,6],_rotation:o(0,0,180)},{_pos:o(1,-1,0),_color:[3,6],_rotation:o(0,90,180)},{_pos:o(0,-1,-1),_color:[5,6],_rotation:o(0,180,180)},{_pos:o(-1,-1,0),_color:[4,6],_rotation:o(0,-90,180)}],p=[{_pos:o(1,1,1),_color:[1,2,3],_rotation:o(0,0,0)},{_pos:o(1,1,-1),_color:[3,2,5],_rotation:o(0,90,0)},{_pos:o(-1,1,-1),_color:[5,2,4],_rotation:o(0,180,0)},{_pos:o(-1,1,1),_color:[4,2,1],_rotation:o(0,-90,0)},{_pos:o(1,-1,1),_color:[1,3,6],_rotation:o(0,0,-90)},{_pos:o(1,-1,-1),_color:[3,5,6],_rotation:o(0,90,-90)},{_pos:o(-1,-1,-1),_color:[5,4,6],_rotation:o(0,180,-90)},{_pos:o(-1,-1,1),_color:[4,1,6],_rotation:o(0,-90,-90)}],u=[],e("CubeParams",(i=n("CubeParams"),i(r=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"getParams",value:function(){return u}},{key:"setCurrParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case 0:u=a.concat(l).concat(c).concat(p);break;case 1:u=a;break;case 2:u=l;break;case 3:u=c;break;case 4:u=p}}}]),e}())||r)),cc._RF.pop()}}})),System.register("project:///assets/script/MainUI.ts",["cc","./CubeParams.ts","./ManagerModel/MessageCenter.ts","./ManagerModel/MessageIDS.ts"],(function(e,t){var s,o,i,r,n,a,l,c,p,u,b,_,h,f,d,v,g,y,M,m,C,D,H,I,k;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_temp:void 0}),{setters:[function(e){s=e._decorator,o=e.Component,i=e.ButtonComponent,r=e.SpriteFrame,n=e.SpriteComponent},function(e){a=e.CubeParams},function(e){l=e.MessageCenter},function(e){c=e.MessageID}],execute:function(){cc._RF.push(window.module||{},"b60a8z69dtLwIb21DA7LoWO","MainUI"),m=s.ccclass,C=s.property,D=!1,H=!1,I=!1,5,k=0,e("MainUI",(p=m("MainUI"),u=C({type:i}),b=C({type:i}),_=C({type:n}),h=C({type:[r]}),p((d=function(e){function t(){var e,s;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return s=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(i))),babelHelpers.initializerDefineProperty(s,"btnArrowL",v,babelHelpers.assertThisInitialized(s)),babelHelpers.initializerDefineProperty(s,"btnArrowR",g,babelHelpers.assertThisInitialized(s)),babelHelpers.initializerDefineProperty(s,"btns",y,babelHelpers.assertThisInitialized(s)),babelHelpers.initializerDefineProperty(s,"frames",M,babelHelpers.assertThisInitialized(s)),s}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"start",value:function(){this.initClickEvent()}},{key:"initClickEvent",value:function(){this.btnArrowL.node.on("click",this.onArrowLEvent,this),this.btnArrowR.node.on("click",this.onArrowREvent,this),this.btns.node.on("click",this.onBtnsEvent,this)}},{key:"onArrowLEvent",value:function(){console.log("MainUI onArrowLEvent"),a.setCurrParams(this.getCurNum(!1)),l.sendMessage(c.MsgID_MF_INIT,["Left"])}},{key:"onArrowREvent",value:function(){console.log("MainUI onArrowREvent"),a.setCurrParams(this.getCurNum(!0)),l.sendMessage(c.MsgID_MF_INIT,["Right"])}},{key:"onBtnsEvent",value:function(){console.log("MainUI onBtnsEvent"),k=0,a.setCurrParams(0),D?H?I||(H=!1,I=!0,this.btns._sprite.spriteFrame=this.frames[1]):(H=!0,I=!1,this.btns._sprite.spriteFrame=this.frames[2]):(D=!0,this.btns._sprite.spriteFrame=this.frames[1]),l.sendMessage(c.MsgID_MF_INIT)}},{key:"getCurNum",value:function(e){var t=k+1*(e?1:-1);return k=0<t&&t<5?t:e?1:4}},{key:"onDestroy",value:function(){this.btnArrowL.node.off("click",this.onArrowLEvent,this),this.btnArrowR.node.off("click",this.onArrowREvent,this),this.btns.node.off("click",this.onBtnsEvent,this)}}]),t}(o),v=babelHelpers.applyDecoratedDescriptor(d.prototype,"btnArrowL",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=babelHelpers.applyDecoratedDescriptor(d.prototype,"btnArrowR",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=babelHelpers.applyDecoratedDescriptor(d.prototype,"btns",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=babelHelpers.applyDecoratedDescriptor(d.prototype,"frames",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=d))||f)),cc._RF.pop()}}})),System.register("project:///assets/script/MoFangMain.ts",["cc","./CubeParams.ts","./ManagerModel/MessageCenter.ts","./ManagerModel/MessageIDS.ts"],(function(e,t){var s,o,i,r,n,a,l,c,p,u,b,_,h,f,d,v,g,y,M,m,C,D,H,I,k,w,E;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_temp:void 0}),{setters:[function(e){s=e._decorator,o=e.Component,i=e.systemEvent,r=e.SystemEvent,n=e.v2,a=e.v3,l=e.instantiate,c=e.Prefab,p=e.CCBoolean},function(e){u=e.CubeParams},function(e){b=e.MessageCenter},function(e){_=e.MessageID}],execute:function(){cc._RF.push(window.module||{},"97dfctE2M9Gy41r/VzoLXW6","MoFangMain"),w=s.ccclass,E=s.property,e("MoFangMain",(h=w("MoFangMain"),f=E({type:c}),d=E({type:p}),v=E({type:a}),g=E({type:a}),y=E({type:n}),h((m=function(e){function t(){var e,s;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return s=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(i))),babelHelpers.initializerDefineProperty(s,"cube",C,babelHelpers.assertThisInitialized(s)),babelHelpers.initializerDefineProperty(s,"isMouseUp",D,babelHelpers.assertThisInitialized(s)),babelHelpers.initializerDefineProperty(s,"moFangRota",H,babelHelpers.assertThisInitialized(s)),babelHelpers.initializerDefineProperty(s,"upPos",I,babelHelpers.assertThisInitialized(s)),babelHelpers.initializerDefineProperty(s,"startPos",k,babelHelpers.assertThisInitialized(s)),s}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"__preload",value:function(){u.moFang=this}},{key:"start",value:function(){u.setCurrParams(0),this.moFangRota=a(30,30,0),this.node.setRotationFromEuler(0,0,0),this.initListerEvent(),this.init(),this.node.setRotationFromEuler(this.moFangRota.x,this.moFangRota.y,this.moFangRota.z),b.addListen(this,this.init.bind(this),_.MsgID_MF_INIT)}},{key:"init",value:function(){console.log("MoFangMain init arg = ".concat(JSON.stringify(arguments))),this.isMouseUp=!0,this.node.removeAllChildren(),this.initQuat()}},{key:"initListerEvent",value:function(){i.on(r.EventType.MOUSE_DOWN,this.onMouseDown,this),i.on(r.EventType.MOUSE_MOVE,this.onMouseMove,this),i.on(r.EventType.MOUSE_UP,this.onMousUp,this),i.on(r.EventType.TOUCH_START,this.onMouseDown,this),i.on(r.EventType.TOUCH_MOVE,this.onMouseMove,this),i.on(r.EventType.TOUCH_END,this.onMousUp,this)}},{key:"initQuat",value:function(){for(var e=u.getParams(),t=0;t<e.length;t++){var s=l(this.cube),o=s.getComponent(s.name),i=e[t]._rotation;s.parent=this.node,s.position=e[t]._pos,o.init(e[t]._color),s.setRotationFromEuler(i.x,i.y,i.z)}}},{key:"onMouseDown",value:function(e){if(this.isMouseUp){this.isMouseUp=!1;var t=this.getTag(e);this.startPos=n(t.x,t.y)}}},{key:"onMouseMove",value:function(e){if(!this.isMouseUp){var t=this.getTag(e),s=t.x-this.startPos.x,o=t.y-this.startPos.y,i=this.moFangRota.x-.5*o,r=this.moFangRota.y+.5*s,n=this.moFangRota.z;this.upPos.x=i,this.upPos.y=r,this.upPos.z=n,this.node.setRotationFromEuler(i,r,n)}}},{key:"onMousUp",value:function(){this.isMouseUp=!0,this.moFangRota=a(this.upPos.x,this.upPos.y,this.upPos.z)}},{key:"getTag",value:function(e){var t={x:0,y:0};return e&&(t.x=e._point?e._point.x:e._x,t.y=e._point?e._point.y:e._y),t}},{key:"onDestroy",value:function(){i.off(r.EventType.MOUSE_DOWN,this.onMouseDown,this),i.off(r.EventType.MOUSE_MOVE,this.onMouseMove,this),i.off(r.EventType.MOUSE_UP,this.onMousUp,this),i.off(r.EventType.TOUCH_START,this.onMouseDown,this),i.off(r.EventType.TOUCH_MOVE,this.onMouseMove,this),i.off(r.EventType.TOUCH_END,this.onMousUp,this)}}]),t}(o),C=babelHelpers.applyDecoratedDescriptor(m.prototype,"cube",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=babelHelpers.applyDecoratedDescriptor(m.prototype,"isMouseUp",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),H=babelHelpers.applyDecoratedDescriptor(m.prototype,"moFangRota",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a(0,0,0)}}),I=babelHelpers.applyDecoratedDescriptor(m.prototype,"upPos",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a(0,0,0)}}),k=babelHelpers.applyDecoratedDescriptor(m.prototype,"startPos",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return n(0,0)}}),M=m))||M)),cc._RF.pop()}}})),System.register("project:///assets/script/ManagerModel/MessageIDS.ts",[],(function(e,t){var s;return e("MessageID",void 0),{setters:[],execute:function(){cc._RF.push(window.module||{},"7a7cfbk+PhAwbi0ByQ7CnJP","MessageIDS"),function(e){e[e.MsgID_MF_INIT=0]="MsgID_MF_INIT"}(s||e("MessageID",s={})),cc._RF.pop()}}})),System.register("project:///assets/script/ManagerModel/MessageCenter.ts",[],(function(e,t){var s;return{setters:[],execute:function(){cc._RF.push(window.module||{},"339b5+rm8dIXqpAhkWv5xEC","MessageCenter"),e("MessageRecvObj",s=function(){function e(){babelHelpers.classCallCheck(this,e),this._tObj=null,this._tObj=null}return babelHelpers.createClass(e,[{key:"dtor",value:function(){this._tObj=null}},{key:"exeMessage",value:function(e,t,s){t.call(this._tObj,s)}}]),e}()),e("MessageCenter",function(){function e(){babelHelpers.classCallCheck(this,e),this._tMessageDict=[],this._bIsGlobalCaching=!1,this._tMessageBuffer=[],this._tObjectList=[]}return babelHelpers.createClass(e,[{key:"getRecvObjIdx",value:function(e){for(var t=0;t<this._tObjectList.length;++t)if(this._tObjectList[t]._tObj==e)return t;return-1}},{key:"getObjArr",value:function(e){var t=this._tMessageDict[e];return void 0===t&&(t=[],this._tMessageDict[e]=t),t}},{key:"exeMessage",value:function(e,t){for(var s=this.getObjArr(e),o=0;o<s.length;o+=2){var i=s[o],r=s[o+1];i.exeMessage(e,r,t)}}},{key:"addListen",value:function(e,t,o){var i=null,r=this.getRecvObjIdx(e);r<0?((i=new s)._tObj=e,this._tObjectList.push(i)):i=this._tObjectList[r];var n=this.getObjArr(o);-1===n.indexOf(e)&&n.push(i,t)}},{key:"delListen",value:function(e){var t=this.getRecvObjIdx(e);if(t>=0){var s=this._tObjectList[t];for(var o in this._tMessageDict)for(var i=this._tMessageDict[o],r=0;r<i.length;r+=2)if(i[r]===s){i.splice(r,2);break}s.dtor(),this._tObjectList.splice(t,1)}}},{key:"sendMessage",value:function(e,t){this._bIsGlobalCaching?this._tMessageBuffer.push([e,t]):this.exeMessage(e,t)}},{key:"setGlobalCacheMessage",value:function(e){if(this._bIsGlobalCaching=e,!this._bIsGlobalCaching){for(var t=0;t<this._tMessageBuffer.length;++t){var s=this._tMessageBuffer[t],o=s[0],i=s[1];this.exeMessage(o,i)}this._tMessageBuffer.length=0}}}],[{key:"sendMessage",value:function(e,t){this.getInstance().sendMessage(e,t)}},{key:"addListen",value:function(e,t,s){this.getInstance().addListen(e,t,s)}},{key:"getInstance",value:function(){return this._instance||(this._instance=new e),this._instance}}]),e}()),cc._RF.pop()}}}))}}}));
