System.register([],(function(){"use strict";return{execute:function(){System.register("project:///assets/script/Cube.ts",["cc"],(function(e,t){var i,o,s,r,n,a,l,c,p,u,b,h;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){i=e._decorator,o=e.Component,s=e.Material,r=e.ModelComponent,n=e.find}],execute:function(){cc._RF.push(window.module||{},"b66fa721SdM+pOj69I1QMe9","Cube"),b=i.ccclass,h=i.property,e("Cube",(a=b("Cube"),l=h({type:[s]}),a((p=function(e){function t(){var e,i;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return i=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s))),babelHelpers.initializerDefineProperty(i,"material",u,babelHelpers.assertThisInitialized(i)),i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"start",value:function(){}},{key:"init",value:function(e){for(var t=0;t<e.length;t++){n("NewQuad"+(t+1),this.node).getComponent(r).material=this.material[e[t]]}}}]),t}(o),u=babelHelpers.applyDecoratedDescriptor(p.prototype,"material",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=p))||c)),cc._RF.pop()}}})),System.register("project:///assets/script/MainUI.ts",["cc","./CubeParams.ts","./ManagerModel/MessageCenter.ts","./ManagerModel/MessageIDS.ts"],(function(e,t){var i,o,s,r,n,a,l,c,p,u,b,h,_,d,f,v,y,g,M,m,C,D,H,k,I,w,F,P,E,z,O;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_temp:void 0}),{setters:[function(e){i=e._decorator,o=e.Component,s=e.ButtonComponent,r=e.SpriteFrame,n=e.SpriteComponent,a=e.AudioClip,l=e.AudioSourceComponent},function(e){c=e.CubeParams},function(e){p=e.MessageCenter},function(e){u=e.MessageID}],execute:function(){cc._RF.push(window.module||{},"b60a8z69dtLwIb21DA7LoWO","MainUI"),w=i.ccclass,F=i.property,P=!1,E=!1,z=!1,5,O=0,e("MainUI",(b=w("MainUI"),h=F({type:s}),_=F({type:s}),d=F({type:n}),f=F({type:[r]}),v=F(a),y=F(a),b((M=function(e){function t(){var e,i;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return i=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s))),babelHelpers.initializerDefineProperty(i,"btnArrowL",m,babelHelpers.assertThisInitialized(i)),babelHelpers.initializerDefineProperty(i,"btnArrowR",C,babelHelpers.assertThisInitialized(i)),babelHelpers.initializerDefineProperty(i,"btns",D,babelHelpers.assertThisInitialized(i)),babelHelpers.initializerDefineProperty(i,"frames",H,babelHelpers.assertThisInitialized(i)),babelHelpers.initializerDefineProperty(i,"clickSound",k,babelHelpers.assertThisInitialized(i)),babelHelpers.initializerDefineProperty(i,"bgSound",I,babelHelpers.assertThisInitialized(i)),i.audioComp=null,i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"start",value:function(){this.audioComp=this.getComponent(l),this.initClickEvent(),this.playSound(!0)}},{key:"initClickEvent",value:function(){this.btnArrowL.node.on("click",this.onArrowLEvent,this),this.btnArrowR.node.on("click",this.onArrowREvent,this),this.btns.node.on("click",this.onBtnsEvent,this)}},{key:"onArrowLEvent",value:function(){return console.log("MainUI onArrowLEvent"),this.playClip(),c.setCurrParams(this.getCurNum(!1)),p.sendMessage(u.MsgID_MF_INIT),!1}},{key:"onArrowREvent",value:function(){return console.log("MainUI onArrowREvent"),this.playClip(),c.setCurrParams(this.getCurNum(!0)),p.sendMessage(u.MsgID_MF_INIT),!1}},{key:"onBtnsEvent",value:function(){console.log("MainUI onBtnsEvent"),O=0,c.setCurrParams(0);var e=!1;return P?E?z||(E=!1,z=!0,e=!0,this.playSound(!1),this.btns._sprite.spriteFrame=this.frames[2]):(E=!0,z=!1,this.playSound(!0),this.btns._sprite.spriteFrame=this.frames[1]):(P=!0,e=!0,this.playSound(!1),this.btns._sprite.spriteFrame=this.frames[2]),p.sendMessage(u.MsgID_MF_INIT,e),!1}},{key:"getCurNum",value:function(e){var t=O+1*(e?1:-1);return O=0<t&&t<5?t:e?1:4}},{key:"playSound",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e?(this.audioComp.clip=this.bgSound,this.audioComp.play()):this.audioComp.pause()}},{key:"playClip",value:function(){this.audioComp.playOneShot(this.clickSound)}},{key:"onDestroy",value:function(){this.btnArrowL.node.off("click",this.onArrowLEvent,this),this.btnArrowR.node.off("click",this.onArrowREvent,this),this.btns.node.off("click",this.onBtnsEvent,this)}}]),t}(o),m=babelHelpers.applyDecoratedDescriptor(M.prototype,"btnArrowL",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=babelHelpers.applyDecoratedDescriptor(M.prototype,"btnArrowR",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=babelHelpers.applyDecoratedDescriptor(M.prototype,"btns",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=babelHelpers.applyDecoratedDescriptor(M.prototype,"frames",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=babelHelpers.applyDecoratedDescriptor(M.prototype,"clickSound",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=babelHelpers.applyDecoratedDescriptor(M.prototype,"bgSound",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=M))||g)),cc._RF.pop()}}})),System.register("project:///assets/script/ManagerModel/MessageIDS.ts",[],(function(e,t){var i;return e("MessageID",void 0),{setters:[],execute:function(){cc._RF.push(window.module||{},"7a7cfbk+PhAwbi0ByQ7CnJP","MessageIDS"),function(e){e[e.MsgID_MF_INIT=0]="MsgID_MF_INIT"}(i||e("MessageID",i={})),cc._RF.pop()}}})),System.register("project:///assets/script/CubeParams.ts",["cc"],(function(e,t){var i,o,s,r,n,a,l,c,p,u;return e({_dec:void 0,_class:void 0}),{setters:[function(e){i=e._decorator,o=e.v3}],execute:function(){cc._RF.push(window.module||{},"886e1QhaOtGOojT73+jkzhF","CubeParams"),n=i.ccclass,i.property,a=[{_pos:o(0,0,0),_color:[0],_rotation:o(0,0,0)}],l=[{_pos:o(0,0,1),_color:[1],_rotation:o(0,0,0)},{_pos:o(0,1,0),_color:[2],_rotation:o(-90,0,0)},{_pos:o(1,0,0),_color:[3],_rotation:o(0,90,0)},{_pos:o(-1,0,0),_color:[4],_rotation:o(0,-90,0)},{_pos:o(0,0,-1),_color:[5],_rotation:o(0,180,0)},{_pos:o(0,-1,0),_color:[6],_rotation:o(90,0,0)}],c=[{_pos:o(0,1,1),_color:[1,2],_rotation:o(0,0,0)},{_pos:o(1,1,0),_color:[3,2],_rotation:o(0,90,0)},{_pos:o(0,1,-1),_color:[5,2],_rotation:o(0,180,0)},{_pos:o(-1,1,0),_color:[4,2],_rotation:o(0,-90,0)},{_pos:o(1,0,1),_color:[1,3],_rotation:o(0,0,-90)},{_pos:o(1,0,-1),_color:[3,5],_rotation:o(0,90,-90)},{_pos:o(-1,0,-1),_color:[5,4],_rotation:o(0,180,-90)},{_pos:o(-1,0,1),_color:[4,1],_rotation:o(0,-90,-90)},{_pos:o(0,-1,1),_color:[1,6],_rotation:o(0,0,180)},{_pos:o(1,-1,0),_color:[3,6],_rotation:o(0,90,180)},{_pos:o(0,-1,-1),_color:[5,6],_rotation:o(0,180,180)},{_pos:o(-1,-1,0),_color:[4,6],_rotation:o(0,-90,180)}],p=[{_pos:o(1,1,1),_color:[1,2,3],_rotation:o(0,0,0)},{_pos:o(1,1,-1),_color:[3,2,5],_rotation:o(0,90,0)},{_pos:o(-1,1,-1),_color:[5,2,4],_rotation:o(0,180,0)},{_pos:o(-1,1,1),_color:[4,2,1],_rotation:o(0,-90,0)},{_pos:o(1,-1,1),_color:[1,3,6],_rotation:o(0,0,-90)},{_pos:o(1,-1,-1),_color:[3,5,6],_rotation:o(0,90,-90)},{_pos:o(-1,-1,-1),_color:[5,4,6],_rotation:o(0,180,-90)},{_pos:o(-1,-1,1),_color:[4,1,6],_rotation:o(0,-90,-90)}],u=[],e("CubeParams",(s=n("CubeParams"),s(r=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"getParams",value:function(){return u}},{key:"setCurrParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case 0:u=a.concat(l).concat(c).concat(p);break;case 1:u=a;break;case 2:u=a.concat(l);break;case 3:u=c;break;case 4:u=a.concat(p)}}}]),e}())||r)),cc._RF.pop()}}})),System.register("project:///assets/script/MoFangMain.ts",["cc","./CubeParams.ts","./ManagerModel/MessageCenter.ts","./ManagerModel/MessageIDS.ts"],(function(e,t){var i,o,s,r,n,a,l,c,p,u,b,h,_,d,f,v,y,g,M,m,C,D,H,k,I,w,F,P,E,z;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_temp:void 0}),{setters:[function(e){i=e._decorator,o=e.Component,s=e.systemEvent,r=e.SystemEvent,n=e.v2,a=e.v3,l=e.instantiate,c=e.Prefab,p=e.CCBoolean,u=e.AnimationComponent},function(e){b=e.CubeParams},function(e){h=e.MessageCenter},function(e){_=e.MessageID}],execute:function(){cc._RF.push(window.module||{},"97dfctE2M9Gy41r/VzoLXW6","MoFangMain"),E=i.ccclass,z=i.property,e("MoFangMain",(d=E("MoFangMain"),f=z({type:u}),v=z({type:c}),y=z({type:p}),g=z({type:a}),M=z({type:a}),m=z({type:n}),d((D=function(e){function t(){var e,i;babelHelpers.classCallCheck(this,t);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return i=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(s))),babelHelpers.initializerDefineProperty(i,"aniMoFang",H,babelHelpers.assertThisInitialized(i)),babelHelpers.initializerDefineProperty(i,"cube",k,babelHelpers.assertThisInitialized(i)),babelHelpers.initializerDefineProperty(i,"isMouseUp",I,babelHelpers.assertThisInitialized(i)),babelHelpers.initializerDefineProperty(i,"moFangRota",w,babelHelpers.assertThisInitialized(i)),babelHelpers.initializerDefineProperty(i,"upPos",F,babelHelpers.assertThisInitialized(i)),babelHelpers.initializerDefineProperty(i,"startPos",P,babelHelpers.assertThisInitialized(i)),i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"__preload",value:function(){b.moFang=this}},{key:"start",value:function(){b.setCurrParams(0),this.moFangRota=a(30,30,0),this.node.setRotationFromEuler(0,0,0),this.initListerEvent(),this.init(),this.node.setRotationFromEuler(this.moFangRota.x,this.moFangRota.y,this.moFangRota.z),h.addListen(this,this.init.bind(this),_.MsgID_MF_INIT)}},{key:"init",value:function(){arguments&&arguments[0]?this.aniMoFang.stop():arguments&&!1===arguments[0]?this.aniMoFang.play():this.aniMoFang.resume(),this.isMouseUp=!0,this.node.removeAllChildren(),this.initQuat()}},{key:"initListerEvent",value:function(){s.on(r.EventType.MOUSE_DOWN,this.onMouseDown,this),s.on(r.EventType.MOUSE_MOVE,this.onMouseMove,this),s.on(r.EventType.MOUSE_UP,this.onMousUp,this),s.on(r.EventType.TOUCH_START,this.onMouseDown,this),s.on(r.EventType.TOUCH_MOVE,this.onMouseMove,this),s.on(r.EventType.TOUCH_END,this.onMousUp,this)}},{key:"initQuat",value:function(){for(var e=b.getParams(),t=0;t<e.length;t++){var i=l(this.cube),o=i.getComponent(i.name),s=e[t]._rotation;i.parent=this.node,i.position=e[t]._pos,o.init(e[t]._color),i.setRotationFromEuler(s.x,s.y,s.z)}}},{key:"onMouseDown",value:function(e){if(this.isMouseUp){this.aniMoFang.pause(),this.isMouseUp=!1;var t=this.getTag(e);this.startPos=n(t.x,t.y)}}},{key:"onMouseMove",value:function(e){if(!this.isMouseUp){var t=this.getTag(e),i=t.x-this.startPos.x,o=t.y-this.startPos.y,s=this.moFangRota.x-.5*o,r=this.moFangRota.y+.5*i,n=this.moFangRota.z;this.upPos.x=s,this.upPos.y=r,this.upPos.z=n,this.node.setRotationFromEuler(s,r,n)}}},{key:"onMousUp",value:function(){this.isMouseUp=!0,this.moFangRota=a(this.upPos.x,this.upPos.y,this.upPos.z),this.aniMoFang.resume()}},{key:"getTag",value:function(e){var t={x:0,y:0};return e&&(t.x=e._point?e._point.x:e._x,t.y=e._point?e._point.y:e._y),t}},{key:"onDestroy",value:function(){s.off(r.EventType.MOUSE_DOWN,this.onMouseDown,this),s.off(r.EventType.MOUSE_MOVE,this.onMouseMove,this),s.off(r.EventType.MOUSE_UP,this.onMousUp,this),s.off(r.EventType.TOUCH_START,this.onMouseDown,this),s.off(r.EventType.TOUCH_MOVE,this.onMouseMove,this),s.off(r.EventType.TOUCH_END,this.onMousUp,this)}}]),t}(o),H=babelHelpers.applyDecoratedDescriptor(D.prototype,"aniMoFang",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=babelHelpers.applyDecoratedDescriptor(D.prototype,"cube",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=babelHelpers.applyDecoratedDescriptor(D.prototype,"isMouseUp",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),w=babelHelpers.applyDecoratedDescriptor(D.prototype,"moFangRota",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a(0,0,0)}}),F=babelHelpers.applyDecoratedDescriptor(D.prototype,"upPos",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a(0,0,0)}}),P=babelHelpers.applyDecoratedDescriptor(D.prototype,"startPos",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return n(0,0)}}),C=D))||C)),cc._RF.pop()}}})),System.register("project:///assets/script/ManagerModel/MessageCenter.ts",[],(function(e,t){var i;return{setters:[],execute:function(){cc._RF.push(window.module||{},"339b5+rm8dIXqpAhkWv5xEC","MessageCenter"),e("MessageRecvObj",i=function(){function e(){babelHelpers.classCallCheck(this,e),this._tObj=null,this._tObj=null}return babelHelpers.createClass(e,[{key:"dtor",value:function(){this._tObj=null}},{key:"exeMessage",value:function(e,t,i){t.call(this._tObj,i)}}]),e}()),e("MessageCenter",function(){function e(){babelHelpers.classCallCheck(this,e),this._tMessageDict=[],this._bIsGlobalCaching=!1,this._tMessageBuffer=[],this._tObjectList=[]}return babelHelpers.createClass(e,[{key:"getRecvObjIdx",value:function(e){for(var t=0;t<this._tObjectList.length;++t)if(this._tObjectList[t]._tObj==e)return t;return-1}},{key:"getObjArr",value:function(e){var t=this._tMessageDict[e];return void 0===t&&(t=[],this._tMessageDict[e]=t),t}},{key:"exeMessage",value:function(e,t){for(var i=this.getObjArr(e),o=0;o<i.length;o+=2){var s=i[o],r=i[o+1];s.exeMessage(e,r,t)}}},{key:"addListen",value:function(e,t,o){var s=null,r=this.getRecvObjIdx(e);r<0?((s=new i)._tObj=e,this._tObjectList.push(s)):s=this._tObjectList[r];var n=this.getObjArr(o);-1===n.indexOf(e)&&n.push(s,t)}},{key:"delListen",value:function(e){var t=this.getRecvObjIdx(e);if(t>=0){var i=this._tObjectList[t];for(var o in this._tMessageDict)for(var s=this._tMessageDict[o],r=0;r<s.length;r+=2)if(s[r]===i){s.splice(r,2);break}i.dtor(),this._tObjectList.splice(t,1)}}},{key:"sendMessage",value:function(e,t){this._bIsGlobalCaching?this._tMessageBuffer.push([e,t]):this.exeMessage(e,t)}},{key:"setGlobalCacheMessage",value:function(e){if(this._bIsGlobalCaching=e,!this._bIsGlobalCaching){for(var t=0;t<this._tMessageBuffer.length;++t){var i=this._tMessageBuffer[t],o=i[0],s=i[1];this.exeMessage(o,s)}this._tMessageBuffer.length=0}}}],[{key:"sendMessage",value:function(e,t){this.getInstance().sendMessage(e,t)}},{key:"addListen",value:function(e,t,i){this.getInstance().addListen(e,t,i)}},{key:"getInstance",value:function(){return this._instance||(this._instance=new e),this._instance}}]),e}()),cc._RF.pop()}}}))}}}));
