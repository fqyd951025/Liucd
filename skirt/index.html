<!DOCTYPE html>
<html>
<!-- /**
    * https://stock.xueqiu.com/v5/stock/finance/cn/income.json?symbol=SZ002901&type=Q4&is_detail=true&count=5&timestamp=
    * income_data 利润表数据
    * 
    * https://stock.xueqiu.com/v5/stock/finance/cn/balance.json?symbol=SZ002901&type=Q4&is_detail=true&count=5&timestamp=
    * balance_data 负债表数据
    * 
    * https://stock.xueqiu.com/v5/stock/finance/cn/cash_flow.json?symbol=SZ002901&type=Q4&is_detail=true&count=5&timestamp=
    * cash_flow_data 现金流量表数据
    * 
    * https://stock.xueqiu.com/v5/stock/finance/cn/indicator.json?symbol=SZ002901&type=Q4&is_detail=true&count=5&timestamp=
    * indicator_data 主要指标数据
   */ -->

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>股票分析&估值</title>
    <script src="https://libs.baidu.com/jquery/1.3.2/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/vue/2.4.2/vue.min.js"></script>
    <style type="text/css">
        table {
            width: 550px;
        }

        td {
            height: 30px;
            align-content: center;
            text-align: center;
        }

        button {
            background-color: rgb(31, 185, 0);
            color: honeydew;
            text-shadow: lawngreen;
        }

        #jisuanqi td,
        select,
        input,
        button {
            font-size: 20pt;
        }

        #jisuanqi td {
            text-align: left;
            height: 40pt;
            font-size: 20pt;
        }

        #jisuanqi button,
        input,
        select {
            height: 30pt;
        }

        #jisuanqi button {
            width: 120pt;
            height: 40pt;
        }

        #jisuanqi input {
            height: 30pt;
            width: 150pt;
        }

        #jisuanqi select {
            height: 30pt;
            width: 60pt;
        }
        #tableTitle {
            text-align: center;
        }
    </style>
</head>

<body>
    <div id="app">
        <sup style="opacity: 0.5">版本号：1.2</sup>
        <table>
            <tr>
                <td style="font-size: 15pt;">股票代码：</td>
                <td>
                    <input type="text" v-model="gpcode" placeholder="输入股票代码"
                        style="width:90pt;height: 20pt; font-size: 12pt;">
                </td>
                <td>
                    <select name="nianbao" id="nianbao" style="height: 30px; font-size: medium;">
                        <option value="Q4">年报</option>
                        <option value="all">全部</option>
                        <option value="Q3">三季报</option>
                    </select>
                </td>
                <td>
                    <button id="btn2" type="button" @click="reqServer"
                        style="width: 120px;height: 35px; font-size: medium;">获 取 数 据</button>
                </td>
                <td style="width: 20%;"></td>
            </tr>
        </table>
        
        <h2>获取到的财报四大报表数据：</h2>
        <table border="1">
            <tr>
                <td>利润表</td>
                <td>资产负债表</td>
                <td>现金流量表</td>
                <td>主要指标表</td>
            </tr>
            <tr>
                <td>
                    <iframe id="iframeIncome" src="" frameborder="0" style="width: 100%;height: 50px;"></iframe>
                </td>
                <td>
                    <iframe id="iframeBalance" src="" frameborder="0" style="width: 100%;height: 50px;"></iframe>
                </td>
                <td>
                    <iframe id="iframeCash" src="" frameborder="0" style="width: 100%;height: 50px;"></iframe>
                </td>
                <td>
                    <iframe id="iframeIndicator" src="" frameborder="0" style="width: 100%;height: 50px;"></iframe>
                </td>
            </tr>
            <tr>
                <td colspan="4" style="text-align: center;color: red;">
                    上面四个框的内容每个都要“全选复制”到下面对应的四个框中
                </td>
            </tr>
            <tr>
                <td>
                    <textarea style="resize:none;width: 96%;height: auto;" name="text1" id="text1"></textarea>
                </td>
                <td>
                    <textarea style="resize:none;;width: 96%;height: auto;" name="text2" id="text2"></textarea>
                </td>
                <td>
                    <textarea style="resize:none;;width: 96%;height: auto;" name="text3" id="text3"></textarea>
                </td>
                <td>
                    <textarea style="resize:none;;width: 96%;height: auto;" name="text4" id="text4"></textarea>
                </td>
            </tr>
        </table>

        <p>
            复制完上面的数据后>>> <button id="btn2" type="button" @click="startFenxi"
                style="width: 130px;height: 40px;font-size: medium;">开始分析股票</button>
        </p>
        <h1>股票名称：{{codeName}}</h1>
        <div>
            <h1>关键财务指标:</h1>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        净资产收益率 > 20%
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td21_0">{{func_21[0]}}</td>
                    <td name="td21_1">{{func_21[1]}}</td>
                    <td name="td21_2">{{func_21[2]}}</td>
                    <td name="td21_3">{{func_21[3]}}</td>
                    <td name="td21_4">{{func_21[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        净利润现金比率 > 100%
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td20_0">{{func_20[0]}}</td>
                    <td name="td20_1">{{func_20[1]}}</td>
                    <td name="td20_2">{{func_20[2]}}</td>
                    <td name="td20_3">{{func_20[3]}}</td>
                    <td name="td20_4">{{func_20[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        资产负债率＜40%
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td24_0">{{func_24[0]}}</td>
                    <td name="td24_1">{{func_24[1]}}</td>
                    <td name="td24_2">{{func_24[2]}}</td>
                    <td name="td24_3">{{func_24[3]}}</td>
                    <td name="td24_4">{{func_24[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        毛利率 > 40%
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td22_0_1">{{func_22.val1[0]}}</td>
                    <td name="td22_1_1">{{func_22.val1[1]}}</td>
                    <td name="td22_2_1">{{func_22.val1[2]}}</td>
                    <td name="td22_3_1">{{func_22.val1[3]}}</td>
                    <td name="td22_4_1">{{func_22.val1[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        营业利润率 > 20%
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td25_0">{{func_25[0]}}</td>
                    <td name="td25_1">{{func_25[1]}}</td>
                    <td name="td25_2">{{func_25[2]}}</td>
                    <td name="td25_3">{{func_25[3]}}</td>
                    <td name="td25_4">{{func_25[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        营业收入增长率 > 10%
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td19_0_2">{{func_19.val2[0]}}</td>
                    <td name="td19_1_2">{{func_19.val2[1]}}</td>
                    <td name="td19_2_2">{{func_19.val2[2]}}</td>
                    <td name="td19_3_2">{{func_19.val2[3]}}</td>
                    <td name="td19_4_2">{{func_19.val2[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        固定资产比率＜40%
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td5_0_2">{{func_5.val2[0]}}</td>
                    <td name="td5_1_2">{{func_5.val2[1]}}</td>
                    <td name="td5_2_2">{{func_5.val2[2]}}</td>
                    <td name="td5_3_2">{{func_5.val2[3]}}</td>
                    <td name="td5_4_2">{{func_5.val2[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        分红率 > 30%
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td26_0">{{func_26[0]}}</td>
                    <td name="td26_1">{{func_26[1]}}</td>
                    <td name="td26_2">{{func_26[2]}}</td>
                    <td name="td26_3">{{func_26[3]}}</td>
                    <td name="td26_4">{{func_26[4]}}</td>
                </tr>
            </table>

            
            <h2>其他财报指标：</h2>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        与企业经营有关的资产占总资产的比率 > 90%，越高越好
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td1_0">{{func_1[0]}}</td>
                    <td name="td1_1">{{func_1[1]}}</td>
                    <td name="td1_2">{{func_1[2]}}</td>
                    <td name="td1_3">{{func_1[3]}}</td>
                    <td name="td1_4">{{func_1[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        货币资金+交易性金融资产和总资产比率 > 25%，越高越好
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td2_0">{{func_2[0]}}</td>
                    <td name="td2_1">{{func_2[1]}}</td>
                    <td name="td2_2">{{func_2[2]}}</td>
                    <td name="td2_3">{{func_2[3]}}</td>
                    <td name="td2_4">{{func_2[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        优质资产和总资产的比率 > 50%，越大越好
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td7_0">{{func_7[0]}}</td>
                    <td name="td7_1">{{func_7[1]}}</td>
                    <td name="td7_2">{{func_7[2]}}</td>
                    <td name="td7_3">{{func_7[3]}}</td>
                    <td name="td7_4">{{func_7[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        应收账款和总资产的比率＜15%，越小越好
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td3_0_1">{{func_3.val1[0]}}</td>
                    <td name="td3_1_1">{{func_3.val1[1]}}</td>
                    <td name="td3_2_1">{{func_3.val1[2]}}</td>
                    <td name="td3_3_1">{{func_3.val1[3]}}</td>
                    <td name="td3_4_1">{{func_3.val1[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        存货与总资产的比率<br>
                        应收账款/总资产＜1%时，应＜20%<br>
                        应收账款/总资产 > 5%时，应＜15%
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td3_0_2">{{func_3.val2[0]}}</td>
                    <td name="td3_1_2">{{func_3.val2[1]}}</td>
                    <td name="td3_2_2">{{func_3.val2[2]}}</td>
                    <td name="td3_3_2">{{func_3.val2[3]}}</td>
                    <td name="td3_4_2">{{func_3.val2[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        预付款项+其他应收款和总资产比率＜10%，越小越好
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td13_0">{{func_13[0]}}</td>
                    <td name="td13_1">{{func_13[1]}}</td>
                    <td name="td13_2">{{func_13[2]}}</td>
                    <td name="td13_3">{{func_13[3]}}</td>
                    <td name="td13_4">{{func_13[4]}}</td>
                </tr>
            </table>
            
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        在建工程和总资产比率， > 5%注意财务造假
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td5_0_1">{{func_5.val1[0]}}</td>
                    <td name="td5_1_1">{{func_5.val1[1]}}</td>
                    <td name="td5_2_1">{{func_5.val1[2]}}</td>
                    <td name="td5_3_1">{{func_5.val1[3]}}</td>
                    <td name="td5_4_1">{{func_5.val1[4]}}</td>
                </tr>
            </table>
            
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        无形资产和总资产的比率＜5%最好，不宜过高
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td6_0">{{func_6[0]}}</td>
                    <td name="td6_1">{{func_6[1]}}</td>
                    <td name="td6_2">{{func_6[2]}}</td>
                    <td name="td6_3">{{func_6[3]}}</td>
                    <td name="td6_4">{{func_6[4]}}</td>
                </tr>
            </table>
            
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        看总资产规模、同比增长率 > 10%成长性较好
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td8_0_1">{{func_8.val1[0]}}</td>
                    <td name="td8_1_1">{{func_8.val1[1]}}</td>
                    <td name="td8_2_1">{{func_8.val1[2]}}</td>
                    <td name="td8_3_1">{{func_8.val1[3]}}</td>
                    <td name="td8_4_1">{{func_8.val1[4]}}</td>
                </tr_>
                <tr>
                    <td name="td8_0_2">{{func_8.val2[0]}}</td>
                    <td name="td8_1_2">{{func_8.val2[1]}}</td>
                    <td name="td8_2_2">{{func_8.val2[2]}}</td>
                    <td name="td8_3_2">{{func_8.val2[3]}}</td>
                    <td name="td8_4_2">{{func_8.val2[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        看资产负债率＜60%、准货币资金减有息负债的差额 > 0
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td24_0">{{func_24[0]}}</td>
                    <td name="td24_1">{{func_24[1]}}</td>
                    <td name="td24_2">{{func_24[2]}}</td>
                    <td name="td24_3">{{func_24[3]}}</td>
                    <td name="td24_4">{{func_24[4]}}</td>
                </tr>
                <tr>
                    <td name="td9_0">{{func_9[0]}}</td>
                    <td name="td9_1">{{func_9[1]}}</td>
                    <td name="td9_2">{{func_9[2]}}</td>
                    <td name="td9_3">{{func_9[3]}}</td>
                    <td name="td9_4">{{func_9[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        “应付预收”减“应收预付”的差额 > 0
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td10_0">{{func_10[0]}}</td>
                    <td name="td10_1">{{func_10[1]}}</td>
                    <td name="td10_2">{{func_10[2]}}</td>
                    <td name="td10_3">{{func_10[3]}}</td>
                    <td name="td10_4">{{func_10[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        应收账款+合同资产占总资产的比率＜15%<br>
                        具有3个或以上核心竞争力且是行业第一名，可以放宽到20%
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td4_0">{{func_4[0]}}</td>
                    <td name="td4_1">{{func_4[1]}}</td>
                    <td name="td4_2">{{func_4[2]}}</td>
                    <td name="td4_3">{{func_4[3]}}</td>
                    <td name="td4_4">{{func_4[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        固定资产+在建工程与总资产的比率＜40%
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td5_0_2">{{func_5.val2[0]}}</td>
                    <td name="td5_1_2">{{func_5.val2[1]}}</td>
                    <td name="td5_2_2">{{func_5.val2[2]}}</td>
                    <td name="td5_3_2">{{func_5.val2[3]}}</td>
                    <td name="td5_4_2">{{func_5.val2[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        投资类资产占总资产的比率＜10%
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td11_0">{{func_11[0]}}</td>
                    <td name="td11_1">{{func_11[1]}}</td>
                    <td name="td11_2">{{func_11[2]}}</td>
                    <td name="td11_3">{{func_11[3]}}</td>
                    <td name="td11_4">{{func_11[4]}}</td>
                </tr>
            </table>
            
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        商誉/总资产＜10%
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td12_0">{{func_12[0]}}</td>
                    <td name="td12_1">{{func_12[1]}}</td>
                    <td name="td12_2">{{func_12[2]}}</td>
                    <td name="td12_3">{{func_12[3]}}</td>
                    <td name="td12_4">{{func_12[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        营业收入规模、营业收入增长率 > 10%
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td19_0_1">{{func_19.val1[0]}}</td>
                    <td name="td19_1_1">{{func_19.val1[1]}}</td>
                    <td name="td19_2_1">{{func_19.val1[2]}}</td>
                    <td name="td19_3_1">{{func_19.val1[3]}}</td>
                    <td name="td19_4_1">{{func_19.val1[4]}}</td>
                </tr>
                <tr>
                    <td name="td19_0_2">{{func_19.val2[0]}}</td>
                    <td name="td19_1_2">{{func_19.val2[1]}}</td>
                    <td name="td19_2_2">{{func_19.val2[2]}}</td>
                    <td name="td19_3_2">{{func_19.val2[3]}}</td>
                    <td name="td19_4_2">{{func_19.val2[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        毛利率 > 40%、毛利率波动＜10%
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td22_0_1">{{func_22.val1[0]}}</td>
                    <td name="td22_1_1">{{func_22.val1[1]}}</td>
                    <td name="td22_2_1">{{func_22.val1[2]}}</td>
                    <td name="td22_3_1">{{func_22.val1[3]}}</td>
                    <td name="td22_4_1">{{func_22.val1[4]}}</td>
                </tr>
                <tr>
                    <td name="td22_0_2">{{func_22.val2[0]}}</td>
                    <td name="td22_1_2">{{func_22.val2[1]}}</td>
                    <td name="td22_2_2">{{func_22.val2[2]}}</td>
                    <td name="td22_3_2">{{func_22.val2[3]}}</td>
                    <td name="td22_4_2">{{func_22.val2[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        期间费用率/毛利率＜40%
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td17_0_1">{{func_17.val1[0]}}</td>
                    <td name="td17_1_1">{{func_17.val1[1]}}</td>
                    <td name="td17_2_1">{{func_17.val1[2]}}</td>
                    <td name="td17_3_1">{{func_17.val1[3]}}</td>
                    <td name="td17_4_1">{{func_17.val1[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        销售费用率＜30%
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td17_0_2">{{func_17.val2[0]}}</td>
                    <td name="td17_1_2">{{func_17.val2[1]}}</td>
                    <td name="td17_2_2">{{func_17.val2[2]}}</td>
                    <td name="td17_3_2">{{func_17.val2[3]}}</td>
                    <td name="td17_4_2">{{func_17.val2[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        主营利润率 > 15%
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td18_0_2">{{func_18.val2[0]}}</td>
                    <td name="td18_1_2">{{func_18.val2[1]}}</td>
                    <td name="td18_2_2">{{func_18.val2[2]}}</td>
                    <td name="td18_3_2">{{func_18.val2[3]}}</td>
                    <td name="td18_4_2">{{func_18.val2[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        主营利润/营业利润的比率 > 80%
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td18_0_1">{{func_18.val1[0]}}</td>
                    <td name="td18_1_1">{{func_18.val1[1]}}</td>
                    <td name="td18_2_1">{{func_18.val1[2]}}</td>
                    <td name="td18_3_1">{{func_18.val1[3]}}</td>
                    <td name="td18_4_1">{{func_18.val1[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        净利润现金含量 > 100%，或者平均5年 > 100%
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td20_0">{{func_20[0]}}</td>
                    <td name="td20_1">{{func_20[1]}}</td>
                    <td name="td20_2">{{func_20[2]}}</td>
                    <td name="td20_3">{{func_20[3]}}</td>
                    <td name="td20_4">{{func_20[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        归母净利润、归母净利润增长率 > 10%
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td23_0_1">{{func_23.val1[0]}}</td>
                    <td name="td23_1_1">{{func_23.val1[1]}}</td>
                    <td name="td23_2_1">{{func_23.val1[2]}}</td>
                    <td name="td23_3_1">{{func_23.val1[3]}}</td>
                    <td name="td23_4_1">{{func_23.val1[4]}}</td>
                </tr>
                <tr>
                    <td name="td23_0_2">{{func_23.val2[0]}}</td>
                    <td name="td23_1_2">{{func_23.val2[1]}}</td>
                    <td name="td23_2_2">{{func_23.val2[2]}}</td>
                    <td name="td23_3_2">{{func_23.val2[3]}}</td>
                    <td name="td23_4_2">{{func_23.val2[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        购买固定资产、无形资产和其他长期资产支付的现金<br>
                        与经营活动产生的现金流量净额的合理比率为3%-60%<br>
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td27_0">{{func_27[0]}}</td>
                    <td name="td27_1">{{func_27[1]}}</td>
                    <td name="td27_2">{{func_27[2]}}</td>
                    <td name="td27_3">{{func_27[3]}}</td>
                    <td name="td27_4">{{func_27[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        分配股利、利润或偿付利息支付的现金<br>
                        与经营活动产生的现金流量净额的比率最好在20%-70%
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td30_0">{{func_30[0]}}</td>
                    <td name="td30_1">{{func_30[1]}}</td>
                    <td name="td30_2">{{func_30[2]}}</td>
                    <td name="td30_3">{{func_30[3]}}</td>
                    <td name="td30_4">{{func_30[4]}}</td>
                </tr>
            </table>

            
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        销售商品、提供劳务收到的现金 和 营业收入比率<br>
                         > 100%，营收质量比较高，利润质量也会比较高<br>
                         > 110%，营收质量很高，利润质量也会很高<br>
                         > 120%，不但没有白条收入，还有大量的预收款项<br>
                        ＜80%,营收白条多，后期应收账款暴雷性大
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td16_0">{{func_16[0]}}</td>
                    <td name="td16_1">{{func_16[1]}}</td>
                    <td name="td16_2">{{func_16[2]}}</td>
                    <td name="td16_3">{{func_16[3]}}</td>
                    <td name="td16_4">{{func_16[4]}}</td>
                </tr>
            </table>
            
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        看现金及现金等价物余额，了解公司的可用现金总额<br>
                        一般钱越多的公司，抗风险能力越强，进行现金分红的能力也越强
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td28_0">{{func_28[0]}}</td>
                    <td name="td28_1">{{func_28[1]}}</td>
                    <td name="td28_2">{{func_28[2]}}</td>
                    <td name="td28_3">{{func_28[3]}}</td>
                    <td name="td28_4">{{func_28[4]}}</td>
                </tr>
            </table>
            <p></p>
            <table border="1">
                <tr>
                    <td id="tableTitle" colspan="5" bgcolor="greed">
                        看经营、投资、筹资活动产生的现金流量净额，了解公司所属的类型
                    </td>
                </tr>
                <tr>
                    <td>{{income[0]["report_name"]}}</td>
                    <td>{{income[1]["report_name"]}}</td>
                    <td>{{income[2]["report_name"]}}</td>
                    <td>{{income[3]["report_name"]}}</td>
                    <td>{{income[4]["report_name"]}}</td>
                </tr>
                <tr>
                    <td name="td29_0_1">{{func_29.val1[0]}}</td>
                    <td name="td29_1_1">{{func_29.val1[1]}}</td>
                    <td name="td29_2_1">{{func_29.val1[2]}}</td>
                    <td name="td29_3_1">{{func_29.val1[3]}}</td>
                    <td name="td29_4_1">{{func_29.val1[4]}}</td>
                </tr>
                <tr>
                    <td name="td29_0_2">{{func_29.val2[0]}}</td>
                    <td name="td29_1_2">{{func_29.val2[1]}}</td>
                    <td name="td29_2_2">{{func_29.val2[2]}}</td>
                    <td name="td29_3_2">{{func_29.val2[3]}}</td>
                    <td name="td29_4_2">{{func_29.val2[4]}}</td>
                </tr>
                <tr>
                    <td name="td29_0_3">{{func_29.val3[0]}}</td>
                    <td name="td29_1_3">{{func_29.val3[1]}}</td>
                    <td name="td29_2_3">{{func_29.val3[2]}}</td>
                    <td name="td29_3_3">{{func_29.val3[3]}}</td>
                    <td name="td29_4_3">{{func_29.val3[4]}}</td>
                </tr>
                <tr>
                    <td name="td29_0_4">{{func_29.val4[0]}}</td>
                    <td name="td29_1_4">{{func_29.val4[1]}}</td>
                    <td name="td29_2_4">{{func_29.val4[2]}}</td>
                    <td name="td29_3_4">{{func_29.val4[3]}}</td>
                    <td name="td29_4_4">{{func_29.val4[4]}}</td>
                </tr>
            </table>
            
            

        </div>
        <h2 style="align-content: center;"><a href="http://" style="text-decoration:underline;" target="view_window"
                id="jingying">点击查看：经营情况讨论与概述</a></h2>
        <h2 style="align-content: center;"><a id="yearReport" href="" style="text-decoration:underline;" target="view_window"
				>点击跳转：新浪网查看年报</a></h2>
		<h2 style="align-content: center;"><a href="http://www.cninfo.com.cn/new/index" style="text-decoration:underline;" target="view_window"
				>点击跳转：巨潮网查看年报</a></h2>

        <div style="background-color: rgb(173, 245, 250);width: 550px;">
            <h1>价格估值计算器</h1>
            <table border="0" id="jisuanqi">
                <tr>
                    <td> 估算几年后的估值： <select id="input0">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                        </select> 年</td>
                </tr>
                <tr>
                    <td>当前的净利润： <input id="input1" type="number" placeholder="0">亿</td>
                </tr>
                <tr>
                    <td>净利润增长率： <input id="input3" placeholder="15" type="number">%</td>
                </tr>
                <tr>
                    <td>最终的市盈率： <input id="input4" placeholder="25" type="number"></td>
                </tr>
                <tr>
                    <td>股票的总股本： <input id="input2" type="number" placeholder="0">亿</td>
                </tr>
                <tr>
                    <td>
                        >>><button id="btn" onclick="clacFun()">开始计算</button></td>
                </tr>
                <tr>
                    <td>市值估值结果：<span id="ret1"></span>亿</td>
                </tr>
                <tr>
                    <td>估值价格：<span id="ret2"></span>元</td>
                </tr>
                <tr>
                    <td>收益翻倍的好价格：<span id="ret3"></span>元</td>
                </tr>
            </table>
        </div>
        <p><iframe src="https://xueqiu.com/" frameborder="0" height="0" width="0"></iframe></p>
    </div>
    <script>
        function clacFun() {
            var year = document.getElementById("input0").value;
            var input1 = document.getElementById("input1").value;
            var input2 = document.getElementById("input2").value;
            var input3 = document.getElementById("input3").value;
            var input4 = document.getElementById("input4").value;
            var ret1 = document.getElementById("ret1");
            var ret2 = document.getElementById("ret2");
            var ret3 = document.getElementById("ret3");
            input1 = input1 == "" ? document.getElementById("input1").placeholder : input1;
            input2 = input2 == "" ? document.getElementById("input2").placeholder : input2;
            input3 = input3 == "" ? document.getElementById("input3").placeholder : input3;
            input4 = input4 == "" ? document.getElementById("input4").placeholder : input4;
            var v = input3 / 100;
            let ret = 0;
            calcF(year, input1);
            var a = ret * input4;//估值结果
            var b = a / input2;//合理价格
            var c = b / 2;//好价格
            ret1.innerText = a.toFixed(2);
            ret2.innerText = b.toFixed(2);
            ret3.innerText = c.toFixed(2);
            function calcF(i, r) {
                if (i <= 0) return;
                r = r * v + r * 1;
                ret = r;
                calcF(--i, r);
            }
        }

    </script>
    <script>
        {
            var income_data = { "data": { "list": [{}, {}, {}, {}, {}] } };
            var balance_data = { "data": { "list": [{}, {}, {}, {}, {}] } };
            var cash_flow_data = { "data": { "list": [{}, {}, {}, {}, {}] } };
            var indicator_data = { "data": { "list": [{}, {}, {}, {}, {}] } };
            var income = income_data["data"]["list"];
            var balance = balance_data["data"]["list"];
            var cash_flow = cash_flow_data["data"]["list"];
            var indicator = indicator_data["data"]["list"];
            var func_1 = [];
            var func_2 = [];
            var func_3 = { val1: [], val2: [] };
            var func_4 = [];
            var func_5 = { val1: [], val2: [] };
            var func_6 = [];
            var func_7 = [];
            var func_8 = { val1: [], val2: [] };
            var func_9 = [];
            var func_10 = [];
            var func_11 = [];
            var func_12 = [];
            var func_13 = [];
            var func_14 = [];
            var func_15 = [];
            var func_16 = [];
            var func_17 = { val1: [], val2: [] };
            var func_18 = { val1: [], val2: [] };
            var func_19 = { val1: [], val2: [] };
            var func_20 = [];
            var func_21 = [];
            var func_22 = { val1: [], val2: [] };
            var func_23 = { val1: [], val2: [] };
            var func_24 = [];
            var func_25 = [];
            var func_26 = [];
            var func_27 = [];
            var func_28 = [];
            var func_29 = { val1: [], val2: [], val3: [], val4: [] };
            var func_30 = [];

        }

        function start(idx) {
            func1(idx);
            func2(idx);
            func3(idx);
            func4(idx);
            func5(idx);
            func6(idx);
            func7(idx);
            func8(idx);
            func9(idx);
            func10(idx);
            func11(idx);
            func12(idx);
            func13(idx);
            func14(idx);
            func15(idx);
            func16(idx);
            func17(idx);
            func18(idx);
            func19(idx);
            func20(idx);
            func21(idx);
            func22(idx);
            func23(idx);
            func24(idx);
            func25(idx);
            func26(idx);
            func27(idx);
            func28(idx);
            func29(idx);
            func30(idx);
        }
        // $("#zhuyaozhibiao")[0].width = window.innerWidth / window.innerHeight > 0.6 ? "100%" : "300";

        var vm = new Vue({
            el: '#app',
            data: {
                gpcode: "",
                codeName: ""
            },
            methods: {
                reqServer() {
                    var gpcode = this.gpcode;
                    var gptype = "cn"; //默认A股
                    //A股
                    if (gpcode.length == 6 && /^[0-9]*$/.test(gpcode)) {

                        if (gpcode[0] == "0" || gpcode[0] == "3") {
                            gpcode = "SZ" + gpcode;
                        } else if (gpcode[0] == "6") {
                            gpcode = "SH" + gpcode;
                        }
                        $("#jingying")[0].style.display = "block";
                    }
                    //港股
                    else if (gpcode.length == 5 && /^[0-9]*$/.test(gpcode)) {
                        gptype = "hk";
                        $("#jingying")[0].style.display = "none";
                        alert("暂不支持分析该类型股票");
                        return;
                    }
                    // 美股
                    else {
                        gptype = "us";
                        $("#jingying")[0].style.display = "none";
                        alert("暂不支持分析该类型股票");
                        return;
                    }

                    var dataType = $("#nianbao")[0].value;
                    $("#iframeIncome")[0].src = `https://stock.xueqiu.com/v5/stock/finance/${gptype}/income.json?symbol=${gpcode}&type=${dataType}&is_detail=true&count=5&timestamp=`;
                    $("#iframeBalance")[0].src = `https://stock.xueqiu.com/v5/stock/finance/${gptype}/balance.json?symbol=${gpcode}&type=${dataType}&is_detail=true&count=5&timestamp=`;
                    $("#iframeCash")[0].src = `https://stock.xueqiu.com/v5/stock/finance/${gptype}/cash_flow.json?symbol=${gpcode}&type=${dataType}&is_detail=true&count=5&timestamp=`;
                    $("#iframeIndicator")[0].src = `https://stock.xueqiu.com/v5/stock/finance/${gptype}/indicator.json?symbol=${gpcode}&type=${dataType}&is_detail=true&count=5&timestamp=`;
                    document.getElementById("text1").value = "";
                    document.getElementById("text2").value = "";
                    document.getElementById("text3").value = "";
                    document.getElementById("text4").value = "";
                    $("#jingying")[0].href = `http://stockpage.10jqka.com.cn/${this.gpcode}/operate/`;

                },
                startFenxi() {
                    if (this.gpcode.length != 6 || !/^[0-9]*$/.test(this.gpcode)) {
                        alert("暂不支持分析该类型股票");
                        return;
                    }
                    this.codeName = "";
                    income_data = JSON.parse(document.getElementById("text1").value);
                    balance_data = JSON.parse(document.getElementById("text2").value);
                    cash_flow_data = JSON.parse(document.getElementById("text3").value);
                    indicator_data = JSON.parse(document.getElementById("text4").value);
                    income = income_data["data"]["list"];
                    balance = balance_data["data"]["list"];
                    cash_flow = cash_flow_data["data"]["list"];
                    indicator = indicator_data["data"]["list"];
                    for (let i = 0; i < balance.length; i++) {
                        start(i);
                    }
                    this.codeName = income_data["data"]["quote_name"];
                }
            },
			watch: {
				gpcode(newVal, oldVal) {
					var url = "https://vip.stock.finance.sina.com.cn/corp/go.php/vCB_Bulletin/stockid/" + newVal + "/page_type/ndbg.phtml";
					document.getElementById("yearReport").href = url;
				}
			}
        });

        //看有关资产和总资产的比率
        /**
         * 与经营有关的资产主要包括
         * 货币资金
         * 交易性金融资产（暂无）
         * 应收票据
         * 应收账款
         * 应收款项融资
         * 预付款项
         * 存货
         * 合同资产
         * 长期应收款
         * 固定资产
         * 在建工程
         * 使用权资产（暂无）
         * 无形资产
         * 开发支出
         * 长期待摊费用
         * 递延所得税资产
        */
        function func1(idx) {
            var total_assets = balance[idx]["total_assets"][0];
            var mainTotal = balance[idx]["currency_funds"][0] +
                balance[idx]["tradable_fnncl_assets"][0] +
                balance[idx]["bills_receivable"][0] +
                balance[idx]["account_receivable"][0] +
                balance[idx]["pre_payment"][0] +
                //交易性金融资产（暂无）
                balance[idx]["inventory"][0] +
                balance[idx]["contractual_assets"][0] +
                balance[idx]["lt_receivable"][0] +
                balance[idx]["fixed_asset"][0] +
                balance[idx]["construction_in_process"][0] +
                //使用权资产（暂无）
                balance[idx]["intangible_assets"][0] +
                balance[idx]["dev_expenditure"][0] +
                balance[idx]["lt_deferred_expense"][0] +
                balance[idx]["dt_assets"][0];
            //result 应 >  90%
            var ret = mainTotal / total_assets * 100;
            var result = ret.toFixed(2) + "%";
            func_1[idx] = result;
            setBiaoHong("td1_" + idx, ret < 70);
        }
        //看货币资金+交易性金融资产和总资产比率
        function func2(idx) {
            var total_assets = balance[idx]["total_assets"][0];
            var total = balance[idx]["currency_funds"][0] + balance[idx]["tradable_fnncl_assets"][0];
            //result应该 > 25%，最好 > 50%
            var result = (total / total_assets * 100).toFixed(2) + "%";
            func_2[idx] = result;
            setBiaoHong("td2_" + idx, (total / total_assets * 100) < 25);
        }
        //看应收账款和总资产的比率
        function func3(idx) {
            var total_assets = balance[idx]["total_assets"][0];
            //result应该＜15%，优秀的＜3%
            var result1 = (balance[idx]["account_receivable"][0] / total_assets * 100).toFixed(2);

            //存货和应收账款有关系，存货和总资产的比率
            // result1<1%,则result2<20%
            // result1>5%,则result2<15%
            var result2 = (balance[idx]["inventory"][0] / total_assets * 100).toFixed(2);
            func_3.val1[idx] = result1 + "%";
            func_3.val2[idx] = result2 + "%";
            setBiaoHong("td3_" + idx +"_1", result1 > 15);
            setBiaoHong("td3_" + idx +"_2", (result1 > 5 && result2 > 15) || (result1 > 1 && result1 < 5 && result2 > 20));
        }
        //看预付款项+合同资产和总资产的比率，反应销售难易度
        function func4(idx) {
            var total_assets = balance[idx]["total_assets"][0];
            var total = balance[idx]["pre_payment"][0] + balance[idx]["contractual_assets"][0];
            //result应该＜15%，优秀＜3%，最优秀的＜1%
            var result = (total / total_assets * 100).toFixed(2);
            func_4[idx] = result + "%";
            setBiaoHong("td4_" + idx, result > 15);
        }
        //看在建工程和总资产的比率
        function func5(idx) {
            var total_assets = balance[idx]["total_assets"][0];
            //在建工程比总资产应该＜5%
            var result1 = (balance[idx]["construction_in_process"][0] / total_assets * 100).toFixed(2);
            //在建工程+固定资产和总资产的比率 <40%,最好<20%
            var result2 = ((balance[idx]["fixed_asset"][0] + balance[idx]["construction_in_process"][0]) / total_assets * 100).toFixed(2);
            func_5.val1[idx] = result1 + "%";
            func_5.val2[idx] = result2 + "%";
            setBiaoHong("td5_" + idx + "_1", result1 > 5);
            setBiaoHong("td5_" + idx + "_2", result2 > 40);

        }
        //看无形资产和总资产的比率
        function func6(idx) {
            var total_assets = balance[idx]["total_assets"][0];
            //result应该＜5%
            var result = (balance[idx]["intangible_assets"][0] / total_assets * 100).toFixed(2);
            func_6[idx] = result+ "%";
            setBiaoHong("td6_" + idx, result > 5);
        }
        //看优质资产和总资产的比率
        function func7(idx) {
            var total_assets = balance[idx]["total_assets"][0];
            var total = balance[idx]["tradable_fnncl_assets"][0] +
                balance[idx]["intangible_assets"][0] +
                balance[idx]["currency_funds"][0] +
                balance[idx]["inventory"][0];
            //result应该 > 50%
            var result = (total / total_assets * 100).toFixed(2);
            func_7[idx] = result + "%";
            setBiaoHong("td7_" + idx, result < 40);
        }
        //看总资产同比增长率，应大10%
        function func8(idx) {
            var total_assets = balance[idx]["total_assets"][0];
            //result应大10%
            var result = (balance[idx]["total_assets"][1] * 100).toFixed(2);
            func_8.val1[idx] = numFormat(total_assets);
            func_8.val2[idx] = result + "%";
            setBiaoHong("td8_" + idx + "_2", result < 0);
        }
        //资产负债率在40-60%之间的时候，有息负债差额
        function func9(idx) {
            var a = balance[idx]["currency_funds"][0] + balance[idx]["tradable_fnncl_assets"][0];
            var b = balance[idx]["st_loan"][0] +
                balance[idx]["noncurrent_liab_due_in1y"][0] +
                balance[idx]["lt_loan"][0] +
                balance[idx]["bond_payable"][0] +
                balance[idx]["lt_payable"][0];
            //a-b>0
            var result = a - b;
            func_9[idx] = numFormat(result);
            setBiaoHong("td9_" + idx, (result) < 0);
        }
        //看应付预收-应收预付  > 0则竞争力强
        function func10(idx) {
            var a = balance[idx]["bill_payable"][0] +
                balance[idx]["accounts_payable"][0] +
                balance[idx]["pre_receivable"][0] +
                balance[idx]["contract_liabilities"][0];
            var b = balance[idx]["bills_receivable"][0] +
                balance[idx]["account_receivable"][0] +
                balance[idx]["pre_payment"][0] +
                balance[idx]["contractual_assets"][0];
            //a-b>0
            var result = a - b;
            func_10[idx] = numFormat(result);
            setBiaoHong("td10_" + idx, (result) < 0);
        }
        //看投资类资产和总资产比率，最好为0，最大到10%
        function func11(idx) {
            var total_assets = balance[idx]["total_assets"][0];
            var a = balance[idx]["saleable_finacial_assets"][0] +
                balance[idx]["held_to_maturity_invest"][0] +
                balance[idx]["lt_equity_invest"][0] +
                balance[idx]["other_eq_ins_invest"][0] +
                balance[idx]["other_illiquid_fnncl_assets"][0] +
                balance[idx]["invest_property"][0];
            //result<10%
            var result = (a / total_assets * 100).toFixed(2);
            func_11[idx] = result+ "%";
            setBiaoHong("td11_" + idx, result > 10);
        }
        //看商誉，要<10%
        function func12(idx) {
            var total_assets = balance[idx]["total_assets"][0];
            var a = balance[idx]["goodwill"][0];
            //result<10%
            var result = (a / total_assets * 100).toFixed(2);
            func_12[idx] = result+ "%";
            setBiaoHong("td12_" + idx, result > 10);
        }
        //预付款项+其他应收款和总资产比率， > 10%淘汰
        function func13(idx) {
            var total_assets = balance[idx]["total_assets"][0];
            var a = balance[idx]["pre_payment"][0] + balance[idx]["othr_receivables"][0];
            //result<10%
            var result = (a / total_assets * 100).toFixed(2);
            func_13[idx] = result+ "%";
            setBiaoHong("td13_" + idx, result > 10);
        }
        /**************************************************/
        //公允价值变动收益+汇兑收益和利润总额比率，越小越好
        function func14(idx) {
            var profit_total_amt = income[idx]["profit_total_amt"][0];
            var a = income[idx]["income_from_chg_in_fv"][0] + income[idx]["exchg_gain"][0];
            var result = (a / profit_total_amt * 100).toFixed(2);
            func_14[idx] = result + "%";
        }
        //其他收益+投资收益+资产处置收益+营业外收入 和利润总额比率，越小越好
        function func15(idx) {
            var profit_total_amt = income[idx]["profit_total_amt"][0];
            var a = income[idx]["non_operating_income"][0] +
                income[idx]["invest_income"][0] +
                income[idx]["asset_disposal_income"][0] +
                income[idx]["other_income"][0];
            var result = (a / profit_total_amt * 100).toFixed(2);
            func_15[idx] = result + "%";
        }
        //销售商品、提供劳务收到的现金 和 营业收入 比率
        //  > 100%，营收质量比较高，利润质量也会比较高
        //  > 110%，营收质量很高，利润质量也会很高
        //  > 120%，不但没有白条收入，还有大量的预收款项
        // ＜80%,营收白条多，后期应收账款暴雷性大
        function func16(idx) {
            var a = income[idx]["revenue"][0];
            var b = cash_flow[idx]["cash_received_of_sales_service"][0];
            var result = (b / a * 100).toFixed(2);
            func_16[idx] = result + "%";
            setBiaoHong("td16_" + idx, result < 80);
        }
        //毛利率高，期间费用率低，经营成功才可能好
        function func17(idx) {
            //毛利率
            var a = indicator[idx]["gross_selling_rate"][0];
            //期间费用率
            var b = (income[idx]["sales_fee"][0] +
                income[idx]["manage_fee"][0] +
                income[idx]["financing_expenses"][0] +
                income[idx]["rad_cost"][0]) / income[idx]["revenue"][0];
            //优秀的公司期间费用率和毛利率比率，<40%,  > 60%淘汰
            var c = (b / a * 10000).toFixed(2);
            //销售费用率
            // > 30%淘汰，<15%最好
            var d = (income[idx]["sales_fee"][0] / income[idx]["revenue"][0] * 100).toFixed(2);
            func_17.val1[idx] = c + "%";
            func_17.val2[idx] = d + "%";
            setBiaoHong("td17_" + idx + "_1", c > 60);
            setBiaoHong("td17_" + idx + "_2", d > 30);
        }
        // 看主营利润
        // 主营利润=营业收入-营业成本-税金及附加-四费之和
        function func18(idx) {
            //主营利润
            var a = income[idx]["revenue"][0] - income[idx]["operating_cost"][0] -
                income[idx]["operating_taxes_and_surcharge"][0] -
                (income[idx]["sales_fee"][0] + income[idx]["manage_fee"][0] +
                    income[idx]["financing_expenses"][0] + income[idx]["rad_cost"][0]);
            // 主营利润/营业利润>80%
            var b = (a / income[idx]["op"][0] * 100).toFixed(2);
            // 主营利润/营业收入>15%
            var c = (a / income[idx]["revenue"][0] * 100).toFixed(2);
            func_18.val1[idx] = b + "%";
            func_18.val2[idx] = c + "%";
            setBiaoHong("td18_" + idx + "_1", b < 80);
            setBiaoHong("td18_" + idx + "_2", c < 15);
        }
        //营收增长率要 > 10%
        function func19(idx) {
            var a = numFormat(income[idx]["revenue"][0]);
            var b = (income[idx]["revenue"][1] * 100).toFixed(2);
            func_19.val1[idx] = a;
            func_19.val2[idx] = b + "%";
            setBiaoHong("td19_" + idx + "_2", b < 5);
        }
        //净利润现金含量  > 100%
        function func20(idx) {
            var a = (cash_flow[idx]["ncf_from_oa"][0] / income[idx]["net_profit"][0] * 100).toFixed(2);
            func_20[idx] = a + "%";
            setBiaoHong("td20_" + idx, a < 100);
        }
        //净资产收益率 ROE
        function func21(idx) {
            func_21[idx] = indicator[idx]["avg_roe"][0] + "%";
            setBiaoHong("td21_" + idx, indicator[idx]["avg_roe"][0] < 15);
        }
        //毛利率
        function func22(idx) {
            var a = (indicator[idx]["gross_selling_rate"][1] * 100).toFixed(2);
            func_22.val1[idx] = (indicator[idx]["gross_selling_rate"][0] * 1).toFixed(2) + "%";
            func_22.val2[idx] = a + "%";
            setBiaoHong("td22_" + idx+"_1", indicator[idx]["gross_selling_rate"][0] * 1 < 20);
            setBiaoHong("td22_" + idx+"_2", a > 10 || a < -10);
        }
        //归母净利润
        function func23(idx) {
            func_23.val1[idx] = numFormat(indicator[idx]["net_profit_atsopc"][0]);
            func_23.val2[idx] = (indicator[idx]["net_profit_atsopc"][1] * 100).toFixed(2) + "%";
            setBiaoHong("td23_" + idx+"_2", indicator[idx]["net_profit_atsopc"][1] * 100 < 5);
        }
        //资产负债率
        function func24(idx) {
            func_24[idx] = indicator[idx]["asset_liab_ratio"][0].toFixed(2) + "%";
            setBiaoHong("td24_" + idx, indicator[idx]["asset_liab_ratio"][0] > 60);
        }
        //营业利润率 = 营业利润 / 营业收入 x 100%
        function func25(idx) {
            var a = (income[idx]["op"][0] / income[idx]["revenue"][0] * 100).toFixed(2);
            func_25[idx] = a + "%";
            setBiaoHong("td25_" + idx, a < 20);
        }
        //分红率
        function func26(idx) {
            var a = (cash_flow[idx]["cash_paid_of_distribution"][0] / income[idx]["net_profit"][0] * 100).toFixed(2);
            func_26[idx] = a + "%";
            setBiaoHong("td26_" + idx, a < 20 || a > 70);
        }
        //看购买固定资产、无形资产和其他长期资产支付的现金
        function func27(idx) {
            var a = (cash_flow[idx]["cash_paid_for_assets"][0] / cash_flow[idx]["ncf_from_oa"][0] * 100).toFixed(2);
            func_27[idx] = a + "%";
            setBiaoHong("td27_" + idx, a < 3 || a > 100);
        }
        //看现金及现金等价物余额，了解公司的可用现金总额
        function func28(idx) {
            var a = (cash_flow[idx]["initial_balance_of_cce"][0]);
            func_28[idx] = numFormat(a);
            setBiaoHong("td28_" + idx, a < 0);
        }
        //看经营、投资、筹资活动产生的现金流量净额
        function func29(idx) {
            var a = cash_flow[idx]["ncf_from_oa"][0];
            var b = cash_flow[idx]["ncf_from_ia"][0];
            var c = cash_flow[idx]["ncf_from_fa"][0];
            func_29.val1[idx] = numFormat(a);
            func_29.val2[idx] = numFormat(b);
            func_29.val3[idx] = numFormat(c);
            var str = "";
            str += 0 < a ? "正" : "负";
            str += 0 < b ? "正" : "负";
            str += 0 < c ? "正" : "负";
            func_29.val4[idx] = str;
            setBiaoHong("td29_" + idx + "_4", !(str == "正正负" || str == "正负负"));
        }
         //看分配股利、利润或偿付利息支付的现金
         function func30(idx) {
             var a =  (cash_flow[idx]["cash_paid_of_distribution"][0] / cash_flow[idx]["ncf_from_oa"][0] * 100).toFixed(2);
            func_30[idx] =a + "%";
            setBiaoHong("td30_" + idx, a < 20 || a > 70);
        }


        function setBiaoHong(id, isRed){
            var a = document.getElementsByName(id);
            if(a.length){
                for (let i = 0; i < a.length; i++) {
                    const element = a[i];
                    a[i].style.backgroundColor = isRed ? "red" : "white";
                }
            }else{
                a.style.backgroundColor = isRed ? "red" : "white";
            }
        }

        function numFormat(num) {
            var fuhao = "";
            if (num < 0) {
                fuhao = "-";
            }
            num = Math.abs(num);
            if (num / 1E8 > 0) {
                return fuhao + (num / 1E8).toFixed(2) + '亿'
            } else if (num / 1E4 > 0) {
                return fuhao + (num / 1E4).toFixed(2) + '万'
            }
            return fuhao + (num).toFixed(2);
        }

    </script>
</body>


</html>
